/*! For license information please see todo.js.LICENSE.txt */
(()=>{"use strict";var e={"./src/Task.js":(e,t,a)=>{a.r(t),a.d(t,{Task:()=>n});var n=function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=(new Date).getTime(),this.name=t,this.isComplete=!1,this}},"./src/ToDoList.js":(e,t,a)=>{a.r(t),a.d(t,{ToDoList:()=>l});var n=a("./src/Task.js");function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=console.log,i=document,o=JSON,c=localStorage,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.key=t,c.getItem(t)||c.setItem(t,o.stringify([])),this.addTask=this.addTask.bind(this),this.editTask=this.editTask.bind(this),this.removeTask=this.removeTask.bind(this)}var t,a;return t=e,(a=[{key:"addTask",value:function(e){if(e.target.value||alert("No puedes agregar una tarea vacia"),13===e.keyCode){var t=new n.Task(e.target.value),a=o.parse(c.getItem(this.key));a.push(t),c.setItem(this.key,o.stringify(a)),e.target.value=null,this.renderTask(t)}}},{key:"editTask",value:function(e){var t=this;if(e.target.matches("label")){var a=o.parse(c.getItem(this.key)),n=a.findIndex((function(t){return t.name===e.target.textContent})),r=i.querySelector('[data-id="'.concat(a[n].id,'"]')),s=function(e){e.target.textContent=e.target.textContent,a[n].name=e.target.textContent,c.setItem(t.key,o.stringify(a)),e.target.blur()};r.addEventListener("blur",(function(e){return s(e)})),r.addEventListener("keyup",(function(e){return 13===e.keyCode&&s(e)}))}}},{key:"removeTask",value:function(e){if(e.target.matches("a")){var t=o.parse(c.getItem(this.key)),a=t.findIndex((function(t){return t.id.toString()===e.target.dataset.id}));s(t,a),t.splice(a,1),c.setItem(this.key,o.stringify(t)),e.target.parentElement.remove()}}},{key:"renderTask",value:function(e){var t='\n      <li class="List-item '.concat(e.isComplete?"complete":"",'">\n        <input class="List-checkbox" type="checkbox" id="').concat(e.id,'" ').concat(e.isComplete?"checked":"",'>\n        <label class="List-label" data-id="').concat(e.id,'" contenteditable spellcheck>').concat(e.name,'</label>\n        <a class="List-removeLink" data-id="').concat(e.id,'" href="#">üóëÔ∏è</a>\n      </li>\n    ');list.insertAdjacentHTML("beforeend",t)}},{key:"render",value:function(){var e=this,t=o.parse(c.getItem(this.key)),a=list.children;s(a),t.forEach((function(t){return e.renderTask(t)})),Array.from(a).forEach((function(a){a.querySelector('input[type="checkbox"]').addEventListener("change",(function(a){var n=t.filter((function(e){return e.id==a.target.id}));a.target.checked?(a.target.parentElement.classList.add("complete"),n[0].isComplete=!0):(a.target.parentElement.classList.remove("complete"),n[0].isComplete=!1),c.setItem(e.key,o.stringify(t))}))})),task.addEventListener("keyup",this.addTask),list.addEventListener("click",this.editTask),list.addEventListener("click",this.removeTask)}}])&&r(t.prototype,a),e}()},"./src/scss/to_do.scss":(e,t,a)=>{a.r(t)}},t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{a.r(n),a("./src/scss/to_do.scss");var e=a("./src/ToDoList.js"),t=document,r=t.getElementById("app"),s=t.createElement("input"),i=t.createElement("ul"),o=new e.ToDoList("myList2");s.id="task",s.classList.add("Task"),s.spellcheck=!0,s.placeholder="Tareas por hacer...",i.id="list",i.classList.add("List"),r.classList.add("ToDo"),r.appendChild(s),r.appendChild(i),o.render()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJwYWNrdGVzdHMvLi9zcmMvVGFzay5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrdGVzdHMvLi9zcmMvVG9Eb0xpc3QuanMiLCJ3ZWJwYWNrOi8vd2VicGFja3Rlc3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYnBhY2t0ZXN0cy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2VicGFja3Rlc3RzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2VicGFja3Rlc3RzL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vd2VicGFja3Rlc3RzLy4vc3JjL3RvX2RvLmpzIl0sIm5hbWVzIjpbIlRhc2siLCJuYW1lIiwidGhpcyIsImlkIiwiRGF0ZSIsImdldFRpbWUiLCJpc0NvbXBsZXRlIiwiYyIsImNvbnNvbGUiLCJsb2ciLCJkIiwiZG9jdW1lbnQiLCJqIiwiSlNPTiIsImxzIiwibG9jYWxTdG9yYWdlIiwiVG9Eb0xpc3QiLCJrZXkiLCJnZXRJdGVtIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImFkZFRhc2siLCJiaW5kIiwiZWRpdFRhc2siLCJyZW1vdmVUYXNrIiwiZSIsInRhcmdldCIsInZhbHVlIiwiYWxlcnQiLCJrZXlDb2RlIiwibmV3VGFzayIsInRhc2tzIiwicGFyc2UiLCJwdXNoIiwicmVuZGVyVGFzayIsIm1hdGNoZXMiLCJ0b0VkaXQiLCJmaW5kSW5kZXgiLCJ0YXNrIiwidGV4dENvbnRlbnQiLCJsYWJlbCIsInF1ZXJ5U2VsZWN0b3IiLCJzYXZlVGFzayIsImJsdXIiLCJhZGRFdmVudExpc3RlbmVyIiwidG9SZW1vdmUiLCJ0b1N0cmluZyIsImRhdGFzZXQiLCJzcGxpY2UiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlIiwidGVtcGxhdGVUYXNrIiwibGlzdCIsImluc2VydEFkamFjZW50SFRNTCIsImxpc3RUYXNrcyIsImNoaWxkcmVuIiwiZm9yRWFjaCIsIkFycmF5IiwiZnJvbSIsImlucHV0IiwiZmlsdGVyIiwiY2hlY2tlZCIsImNsYXNzTGlzdCIsImFkZCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZGVmaW5pdGlvbiIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiYXBwIiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGVFbGVtZW50IiwidG9kbyIsInNwZWxsY2hlY2siLCJwbGFjZWhvbGRlciIsImFwcGVuZENoaWxkIiwicmVuZGVyIl0sIm1hcHBpbmdzIjoiOytFQUFPLElBQU1BLEVBQ1QsV0FBWUMsR0FJVixPLDRGQUpnQixTQUNoQkMsS0FBS0MsSUFBSyxJQUFJQyxNQUFPQyxVQUNyQkgsS0FBS0QsS0FBT0EsRUFDWkMsS0FBS0ksWUFBYSxFQUNYSixPLDRQQ0hiLElBQ1FLLEVBQUlDLFFBQVFDLElBQ1pDLEVBQUlDLFNBQ0pDLEVBQUlDLEtBQ0pDLEVBQUtDLGFBRUFDLEVBQWIsV0FDRSxXQUFZQyxJLDRGQUFLLFNBQ2ZmLEtBQUtlLElBQU1BLEVBRU5ILEVBQUdJLFFBQVFELElBQ2RILEVBQUdLLFFBQVFGLEVBQUtMLEVBQUVRLFVBQVUsS0FHOUJsQixLQUFLbUIsUUFBVW5CLEtBQUttQixRQUFRQyxLQUFLcEIsTUFDakNBLEtBQUtxQixTQUFXckIsS0FBS3FCLFNBQVNELEtBQUtwQixNQUNuQ0EsS0FBS3NCLFdBQWF0QixLQUFLc0IsV0FBV0YsS0FBS3BCLE0sUUFWM0MsTyxFQUFBLEcsRUFBQSxzQkFhRSxTQUFRdUIsR0FNTixHQUpLQSxFQUFF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dEIsVUFBVUMsSUFBSSxRQUNsQnFCLEVBQUlNLFlBQVlwRCxHQUNoQjhDLEVBQUlNLFlBQVl0QyxHQUVoQm1DLEVBQUtJLFUiLCJmaWxlIjoidG9kby5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBUYXNrIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgdGhpcy5pZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICB0aGlzLmlzQ29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgfSAiLCJpbXBvcnQgeyBUYXNrIH0gZnJvbSAnLi9UYXNrJztcclxuXHJcbmNvbnN0ICAgRU5URVJfS0VZID0gMTMsXHJcbiAgICAgICAgYyA9IGNvbnNvbGUubG9nLFxyXG4gICAgICAgIGQgPSBkb2N1bWVudCxcclxuICAgICAgICBqID0gSlNPTixcclxuICAgICAgICBscyA9IGxvY2FsU3RvcmFnZTtcclxuXHJcbmV4cG9ydCBjbGFzcyBUb0RvTGlzdCB7XHJcbiAgY29uc3RydWN0b3Ioa2V5KSB7XHJcbiAgICB0aGlzLmtleSA9IGtleTtcclxuXHJcbiAgICBpZiAoIWxzLmdldEl0ZW0oa2V5KSkge1xyXG4gICAgICBscy5zZXRJdGVtKGtleSwgai5zdHJpbmdpZnkoW10pKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFkZFRhc2sgPSB0aGlzLmFkZFRhc2suYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZWRpdFRhc2sgPSB0aGlzLmVkaXRUYXNrLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnJlbW92ZVRhc2sgPSB0aGlzLnJlbW92ZVRhc2suYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGFkZFRhc2soZSkge1xyXG4gICAgLy9jKGUpXHJcbiAgICBpZiAoIWUudGFyZ2V0LnZhbHVlKSB7XHJcbiAgICAgIGFsZXJ0KCdObyBwdWVkZXMgYWdyZWdhciB1bmEgdGFyZWEgdmFjaWEnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZS5rZXlDb2RlID09PSBFTlRFUl9LRVkpIHtcclxuICAgICAgbGV0IG5ld1Rhc2sgPSBuZXcgVGFzayhlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgIGxldCB0YXNrcyA9IGoucGFyc2UobHMuZ2V0SXRlbSh0aGlzLmtleSkpO1xyXG5cclxuICAgICAgdGFza3MucHVzaChuZXdUYXNrKTtcclxuICAgICAgbHMuc2V0SXRlbSh0aGlzLmtleSwgai5zdHJpbmdpZnkodGFza3MpKTtcclxuICAgICAgZS50YXJnZXQudmFsdWUgPSBudWxsO1xyXG4gICAgICB0aGlzLnJlbmRlclRhc2sobmV3VGFzayk7XHJcbiAgICAgIC8vYyhuZXdUYXNrLCAnXFxuJywgdGFza3MsICdcXG4nLCBscylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGVkaXRUYXNrKGUpIHtcclxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKCdsYWJlbCcpKSB7XHJcbiAgICAgIGxldCB0YXNrcyA9IGoucGFyc2UobHMuZ2V0SXRlbSh0aGlzLmtleSkpO1xyXG4gICAgICBsZXQgdG9FZGl0ID0gdGFza3MuZmluZEluZGV4KHRhc2sgPT4gdGFzay5uYW1lID09PSBlLnRhcmdldC50ZXh0Q29udGVudCk7XHJcbiAgICAgIGxldCBsYWJlbCA9IGQucXVlcnlTZWxlY3RvcihgW2RhdGEtaWQ9XCIke3Rhc2tzW3RvRWRpdF0uaWR9XCJdYCk7XHJcblxyXG4gICAgICAvL2ModGFza3MsIHRvRWRpdCwgdGFza3NbdG9FZGl0XSlcclxuXHJcbiAgICAgIGNvbnN0IHNhdmVUYXNrID0gZSA9PiB7XHJcbiAgICAgICAgZS50YXJnZXQudGV4dENvbnRlbnQgPSBlLnRhcmdldC50ZXh0Q29udGVudDtcclxuICAgICAgICB0YXNrc1t0b0VkaXRdLm5hbWUgPSBlLnRhcmdldC50ZXh0Q29udGVudDtcclxuICAgICAgICBscy5zZXRJdGVtKHRoaXMua2V5LCBqLnN0cmluZ2lmeSh0YXNrcykpO1xyXG4gICAgICAgIGUudGFyZ2V0LmJsdXIoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGFiZWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGUgPT4gc2F2ZVRhc2soZSkpO1xyXG4gICAgICBsYWJlbC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGUgPT4gKGUua2V5Q29kZSA9PT0gRU5URVJfS0VZKSAmJiBzYXZlVGFzayhlKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVUYXNrKGUpIHtcclxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKCdhJykpIHtcclxuICAgICAgbGV0IHRhc2tzID0gai5wYXJzZShscy5nZXRJdGVtKHRoaXMua2V5KSk7XHJcbiAgICAgIGxldCB0b1JlbW92ZSA9IHRhc2tzLmZpbmRJbmRleCh0YXNrID0+IHRhc2suaWQudG9TdHJpbmcoKSA9PT0gZS50YXJnZXQuZGF0YXNldC5pZCk7XHJcblxyXG4gICAgICBjKHRhc2tzLCB0b1JlbW92ZSk7XHJcblxyXG4gICAgICB0YXNrcy5zcGxpY2UodG9SZW1vdmUsIDEpO1xyXG4gICAgICBscy5zZXRJdGVtKHRoaXMua2V5LCBqLnN0cmluZ2lmeSh0YXNrcykpO1xyXG4gICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyVGFzayh0YXNrKSB7XHJcbiAgICBsZXQgdGVtcGxhdGVUYXNrID0gYFxyXG4gICAgICA8bGkgY2xhc3M9XCJMaXN0LWl0ZW0gJHt0YXNrLmlzQ29tcGxldGUgPyAnY29tcGxldGUnIDogJyd9XCI+XHJcbiAgICAgICAgPGlucHV0IGNsYXNzPVwiTGlzdC1jaGVja2JveFwiIHR5cGU9XCJjaGVja2JveFwiIGlkPVwiJHt0YXNrLmlkfVwiICR7dGFzay5pc0NvbXBsZXRlID8gJ2NoZWNrZWQnIDogJyd9PlxyXG4gICAgICAgIDxsYWJlbCBjbGFzcz1cIkxpc3QtbGFiZWxcIiBkYXRhLWlkPVwiJHt0YXNrLmlkfVwiIGNvbnRlbnRlZGl0YWJsZSBzcGVsbGNoZWNrPiR7dGFzay5uYW1lfTwvbGFiZWw+XHJcbiAgICAgICAgPGEgY2xhc3M9XCJMaXN0LXJlbW92ZUxpbmtcIiBkYXRhLWlkPVwiJHt0YXNrLmlkfVwiIGhyZWY9XCIjXCI+8J+Xke+4jzwvYT5cclxuICAgICAgPC9saT5cclxuICAgIGA7XHJcblxyXG4gICAgbGlzdC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHRlbXBsYXRlVGFzayk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBsZXQgdGFza3MgPSBqLnBhcnNlKGxzLmdldEl0ZW0odGhpcy5rZXkpKTtcclxuICAgIGxldCBsaXN0VGFza3MgPSBsaXN0LmNoaWxkcmVuO1xyXG5cclxuICAgIGMobGlzdFRhc2tzKTtcclxuXHJcbiAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4gdGhpcy5yZW5kZXJUYXNrKHRhc2spKTtcclxuXHJcbiAgICBBcnJheS5mcm9tKGxpc3RUYXNrcykuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgIGlucHV0LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4ge1xyXG4gICAgICAgIGxldCB0YXNrID0gdGFza3MuZmlsdGVyKHRhc2sgPT4gdGFzay5pZCA9PSBlLnRhcmdldC5pZCk7XHJcbiAgICAgICAgLy9jKHRhc2spXHJcblxyXG4gICAgICAgIGlmIChlLnRhcmdldC5jaGVja2VkKSB7XHJcbiAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlJyk7XHJcbiAgICAgICAgICB0YXNrWzBdLmlzQ29tcGxldGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlJyk7XHJcbiAgICAgICAgICB0YXNrWzBdLmlzQ29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxzLnNldEl0ZW0odGhpcy5rZXksIGouc3RyaW5naWZ5KHRhc2tzKSk7XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIHRhc2suYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmFkZFRhc2spO1xyXG4gICAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZWRpdFRhc2spO1xyXG4gICAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMucmVtb3ZlVGFzayk7XHJcbiAgfVxyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0ICcuL3Njc3MvdG9fZG8uc2Nzcyc7XHJcbmltcG9ydCB7IFRvRG9MaXN0IH0gZnJvbSAnLi9Ub0RvTGlzdCc7XHJcblxyXG5jb25zdCAgIGQgPSBkb2N1bWVudCxcclxuICAgICAgICBhcHAgPSBkLmdldEVsZW1lbnRCeUlkKCdhcHAnKSxcclxuICAgICAgICB0YXNrID0gZC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpLFxyXG4gICAgICAgIGxpc3QgPSBkLmNyZWF0ZUVsZW1lbnQoJ3VsJyksXHJcbiAgICAgICAgdG9kbyA9IG5ldyBUb0RvTGlzdCgnbXlMaXN0MicpO1xyXG5cclxudGFzay5pZCA9ICd0YXNrJztcclxudGFzay5jbGFzc0xpc3QuYWRkKCdUYXNrJyk7XHJcbnRhc2suc3BlbGxjaGVjayA9IHRydWU7XHJcbnRhc2sucGxhY2Vob2xkZXIgPSAnVGFyZWFzIHBvciBoYWNlci4uLic7XHJcblxyXG5saXN0LmlkID0gJ2xpc3QnO1xyXG5saXN0LmNsYXNzTGlzdC5hZGQoJ0xpc3QnKTtcclxuXHJcbmFwcC5jbGFzc0xpc3QuYWRkKCdUb0RvJyk7XHJcbmFwcC5hcHBlbmRDaGlsZCh0YXNrKTtcclxuYXBwLmFwcGVuZENoaWxkKGxpc3QpO1xyXG5cclxudG9kby5yZW5kZXIoKTsiXSwic291cmNlUm9vdCI6IiJ9